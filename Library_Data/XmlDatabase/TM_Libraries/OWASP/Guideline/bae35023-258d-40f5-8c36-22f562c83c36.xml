<?xml version="1.0" encoding="utf-8"?>
<guidanceItem id="bae35023-258d-40f5-8c36-22f562c83c36" Author="" Category="Deployment Considerations" Priority="2" Rule_Type="Guideline" Status="" Technology="ASP.NET 3.5" title="Encrypt Configuration Sections That Store Sensitive Data" Topic="Security" phase="Deployment" xmlns="urn:microsoft:guidanceexplorer:guidanceItem">
  <content>&lt;h1&gt;What to Do&lt;/h1&gt;&lt;p&gt;Encrypt configuration sections containing sensitive data such as passwords or usernames. &lt;/p&gt;&lt;h1&gt;Why&lt;/h1&gt;&lt;p&gt;Configuration sections typically contain privacy sensitive resource access credentials (e.g., a connection string for a SQL server resource includes a username and password.) As a precautionary measure, they should not be stored in plaintext, because an attacker that can compromise a server will be able to read those values if they are not adequately protected. &lt;/p&gt;&lt;h1&gt;When&lt;/h1&gt;&lt;p&gt;This guideline is applicable whenever configuration sections are utilized. &lt;/p&gt;&lt;h1&gt;How&lt;/h1&gt;&lt;p&gt;In ASP.NET, you can use either the DPAPI or RSA protected configuration providers to encrypt specific sections that contain sensitive data. The sections that usually contain sensitive information that you need to encrypt include &amp;lt;appSettings&amp;gt;, &amp;lt;connectionStrings&amp;gt;, &amp;lt;identity&amp;gt;, and &amp;lt;sessionState&amp;gt;. To encrypt the &amp;lt;connectionStrings&amp;gt; section by using the DPAPI provider with the machine-key store (the default configuration), run the following command from a command window:&lt;/p&gt;&lt;div&gt;&lt;br&gt;&lt;pre&gt;aspnet_regiis -pe "connectionStrings" -app "/MachineDPAPI" -prov "DataProtectionConfigurationProvider" &lt;/pre&gt;&lt;br&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;-pe&lt;/strong&gt;: Specifies the configuration section to encrypt. &lt;/li&gt;&lt;li&gt;&lt;strong&gt;-app&lt;/strong&gt;: Specifies your Web application's virtual path. If your application is nested, you need to specify the nested path from the root directory; for example, "/test/aspnet/MachineDPAPI". &lt;/li&gt;&lt;li&gt;&lt;strong&gt;-prov&lt;/strong&gt;: Specifies the provider name.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;If you need to encrypt configuration file data on multiple servers in a Web farm, you should use RSA protected configuration provider because of the ease with which you can export RSA key containers.&amp;nbsp; &lt;/p&gt;&lt;h1&gt;Related Items&lt;/h1&gt;&lt;ul&gt;&lt;li&gt;&lt;a href="ruledisplay:f10679b7-5390-49ee-b529-7a2f7c059ce7"&gt;Encrypt Connection Strings&lt;/a&gt; &lt;/li&gt;&lt;li&gt;&lt;a href="ruledisplay:760734bc-7080-4864-91ec-fd6db510f8ed"&gt;Credentials in SQL Connection Strings are Protected in Configuration Files&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;hr&gt;&lt;p&gt;Adapted from Microsoft patterns &amp;amp; practices guidance. &lt;/p&gt;</content>
</guidanceItem>