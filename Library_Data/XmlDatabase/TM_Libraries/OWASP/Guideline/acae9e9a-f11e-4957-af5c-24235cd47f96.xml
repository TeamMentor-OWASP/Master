<?xml version="1.0" encoding="utf-8"?>
<guidanceItem id="acae9e9a-f11e-4957-af5c-24235cd47f96" Author="" Category="Authentication" Priority="2" Rule_Type="Guideline" Status="" Technology="ASP.NET 3.5" title="Consider Partitioning Your Site to Restricted Areas And Public Areas" Topic="Security" phase="Design" xmlns="urn:microsoft:guidanceexplorer:guidanceItem">
  <content>&lt;h1&gt;What to Do&lt;/h1&gt;&lt;p&gt;To avoid the performance overhead of using SSL across your entire site, consider using a separate folder to help protect pages that require authenticated access. Configure that folder in IIS to require SSL access. Those pages that support anonymous access can safely be accessed over HTTP connections.&lt;/p&gt;&lt;h1&gt;Why&lt;/h1&gt;&lt;p&gt;Using SSL across an entire site can incur a significant performance penalty. For sites that have pages which may be viewed without encryption or authentication, it will improve performance to separate out restricted from non-restricted pages. &lt;/p&gt;&lt;h1&gt;When&lt;/h1&gt;&lt;p&gt;This technique should be employed whenever an application has a mix of pages - some of which require authentication while others don't. &lt;/p&gt;&lt;h1&gt;How&lt;/h1&gt;&lt;p&gt;To avoid having to use SSL across your entire site, structure your Web site so that the secure pages that require authenticated access are placed in a subdirectory that is separate from the anonymously accessible pages.&amp;nbsp; &lt;/p&gt;&lt;p&gt;&lt;strong&gt;To secure pages in a separate subfolder&lt;/strong&gt; &lt;/p&gt;&lt;ol&gt;&lt;li&gt;&lt;p&gt;In Microsoft Internet Information Services (IIS), configure the secure folder to require SSL. This sets the &lt;strong&gt;AccessSSL=true&lt;/strong&gt; attribute for the folder in the IIS Metabase. Requests for pages in the secured folders are successful only if HTTPS is used for the request URL. &lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Use an &amp;lt;&lt;strong&gt;authorization&lt;/strong&gt;&amp;gt; element to ensure that only authenticated users can access secure pages. Place this element beneath the closing &amp;lt;&lt;strong&gt;/system.web&lt;/strong&gt;&amp;gt; tag, as shown here. &lt;/p&gt;&lt;pre&gt;&amp;lt;!-- The secure folder is for authenticated and SSL access only. --&amp;gt;&lt;br&gt;&amp;lt;location path="Secure" &amp;gt;&lt;br&gt;  &amp;lt;system.web&amp;gt;&lt;br&gt;    &amp;lt;authorization&amp;gt;&lt;br&gt;      &amp;lt;deny users="?" /&amp;gt;&lt;br&gt;    &amp;lt;/authorization&amp;gt;&lt;br&gt;  &amp;lt;/system.web&amp;gt;&lt;br&gt;&amp;lt;/location&amp;gt;  &lt;/pre&gt;&lt;p&gt;Additionally, the following configuration ensures that unauthenticated users are allowed to access pages in the application's root directory. Place this configuration in the main &amp;lt;&lt;strong&gt;system.web&lt;/strong&gt;&amp;gt; element. &lt;/p&gt;&lt;pre&gt;&amp;lt;system.web&amp;gt;&lt;br&gt;  &amp;lt;!-- The virtual directory root folder contains general pages.&lt;br&gt;       Unauthenticated users can view them and they do not need&lt;br&gt;        to be secured with SSL. --&amp;gt;&lt;br&gt;  &amp;lt;authorization&amp;gt;&lt;br&gt;    &amp;lt;allow users="*" /&amp;gt;&lt;br&gt;  &amp;lt;/authorization&amp;gt;&lt;br&gt;&amp;lt;/system.web&amp;gt;  &lt;/pre&gt;&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;If you use this type of site structure, your application must not rely on the user's identity on the non-SSL pages. In the preceding configuration, no forms authentication ticket is sent for requests for non-SSL pages. As a result, the user is considered anonymous. This has implications for related features, such as personalization, that require the user name.&lt;strong&gt;&amp;nbsp;&lt;/strong&gt;&amp;nbsp;&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;hr&gt;&lt;p&gt;Adapted from Microsoft patterns &amp;amp; practices guidance. &lt;/p&gt;</content>
</guidanceItem>